import{_ as y,o as n,c as l,m as g,e as v,n as p,d as h,h as b,q as M,r as w,a as m,u as C,s as d,t as f}from"./index-e56573cb.js";const S={},k={class:"flex-wrap-container"};function R(e,c){return n(),l("div",k,[g(e.$slots,"default")])}const N=y(S,[["render",R]]);const P={class:"wrapper"},D={__name:"LikeHeart",props:{isFav:Boolean,heartColor:String,heartClick:Function},setup(e){return(c,r)=>(n(),l("div",P,[v("div",{onClick:r[0]||(r[0]=(...i)=>e.heartClick&&e.heartClick(...i)),style:p(e.heartColor),id:"heart"},null,4)]))}},T=y(D,[["__scopeId","data-v-8ab73aaf"]]);function x(){const e=h([]),c=b(()=>{if(e.value)return e.value});async function r(i){console.count("REQUEST");const t=`http://www.omdbapi.com/?apiKey=5a4d22b2&i=${i}`;fetch(t,{method:"GET"}).then(s=>s.json()).then(s=>e.value=s).catch(s=>console.error("error:"+s))}return{movieDetails:c,startDetailsSearch:r}}function $(){const{movieDetails:e,startDetailsSearch:c}=x(),r=h("");async function i(o){console.log(e.value.imdbID===o),e.value.imdbID===o?t():await c(o),M(e,()=>{console.log("watch triggered"),e.value.Title&&t()});async function t(){const a=JSON.stringify({data:{imdbID:e.value.imdbID,Poster:e.value.Poster,Title:e.value.Title,Plot:e.value.Plot,Director:e.value.Director,Actors:e.value.Actors,Writer:e.value.Writer,Release:e.value.Release,Runtime:e.value.Runtime,Genre:e.value.Genre,BoxOffice:e.value.BoxOffice,Country:e.value.Country}}),s=new Headers;s.append("Authorization","Bearer 2653a3f7473c20d511f009504e329c1870dc2782c53908899ecf3997e2e0611cbcea784c381286685a3a6ba8d5e371b2cf775c8bd29e4c69c7a19d4a1fc591f8c69bdcb7f38e0c5bcd2fc37872a2104048901b1670114751c50921954e918695fc440e147a1cf64954d06ae1e2aafcaa95e51af694c056d343fea0d813f2daea"),s.append("Content-Type","application/json"),await fetch("http://localhost:1337/api/movies",{method:"POST",headers:s,redirect:"follow",body:a}).then(u=>u.json()).then(u=>console.log(u)).catch(u=>console.log("error",u))}}return{addNewMovie:i,movieID:r}}function B(){const e=h(0);async function c(r){const i=new Headers;i.append("Authorization","Bearer 2653a3f7473c20d511f009504e329c1870dc2782c53908899ecf3997e2e0611cbcea784c381286685a3a6ba8d5e371b2cf775c8bd29e4c69c7a19d4a1fc591f8c69bdcb7f38e0c5bcd2fc37872a2104048901b1670114751c50921954e918695fc440e147a1cf64954d06ae1e2aafcaa95e51af694c056d343fea0d813f2daea");const o={method:"GET",headers:i,redirect:"follow"};await fetch(`http://localhost:1337/api/movies?filters[imdbID][$eq]=${r}`,o).then(t=>t.json()).then(t=>e.value=t.data[0].id).catch(t=>console.log("error",t)),o.method="DELETE",console.log(e.value),await fetch(`http://localhost:1337/api/movies/${e.value}`,o).then(t=>t.json()).then(t=>console.log(t)).catch(t=>console.log("error",t))}return{deleteMyMovie:c}}const A={key:0,class:"MovieCard"},I=["src"],O={key:0},E={key:1},H={key:2},q={key:3},F={key:4},j={__name:"MovieCard",props:{Title:String,Poster:String,Release:String,Runtime:String,Director:String,Actors:String,Plot:String,isMyMovie:Boolean,id:Number,imdbID:String},setup(e){const c=e,{addNewMovie:r}=$(),{deleteMyMovie:i}=B(),o=h(!!c.isMyMovie),t=b(()=>o.value?"--color:rgb(212, 57, 57);":"--color:rgb(143, 141, 141);");async function a(){o.value=!o.value,o.value?r(c.imdbID):i(c.imdbID)}return(s,_)=>{const u=w("v-icon");return e.Title?(n(),l("div",A,[m(T,{isFav:o.value,heartColor:C(t),heartClick:a},null,8,["isFav","heartColor"]),m(u,{class:"info-icon",icon:"mdi-home"}),e.Poster?(n(),l("img",{key:0,src:e.Poster,alt:""},null,8,I)):d("",!0),v("p",null,f(e.Title),1),v("div",null,[e.Release?(n(),l("p",O,"Published: "+f(e.Release),1)):d("",!0),e.Runtime?(n(),l("p",E,"Length: "+f(e.Runtime),1)):d("",!0),e.Director?(n(),l("p",H,"Regie: "+f(e.Director),1)):d("",!0),e.Actors?(n(),l("p",q,"Stars: "+f(e.Actors),1)):d("",!0),e.Plot?(n(),l("p",F,"Plot:"+f(e.Plot),1)):d("",!0)])])):d("",!0)}}};function W(){const e=h([]),c=b(()=>e.value.map(a=>({id:a.id,imdbID:a.attributes.imdbID,Poster:a.attributes.Poster,Title:a.attributes.Title,Plot:a.attributes.Plot,Director:a.attributes.Director,Actors:a.attributes.Actors,Writer:a.attributes.Writer,Release:a.attributes.Release,Runtime:a.attributes.Runtime,Genre:a.attributes.Genre,BoxOffice:a.attributes.BoxOffice,Country:a.attributes.Country}))),r=new Headers;r.append("Authorization","Bearer 2653a3f7473c20d511f009504e329c1870dc2782c53908899ecf3997e2e0611cbcea784c381286685a3a6ba8d5e371b2cf775c8bd29e4c69c7a19d4a1fc591f8c69bdcb7f38e0c5bcd2fc37872a2104048901b1670114751c50921954e918695fc440e147a1cf64954d06ae1e2aafcaa95e51af694c056d343fea0d813f2daea");const i={method:"GET",headers:r,redirect:"follow"};async function o(){await fetch("http://localhost:1337/api/movies",i).then(t=>t.json()).then(t=>e.value=t.data).catch(t=>console.log("error",t))}return{myMovies:c,getMyMovies:o}}export{N as F,j as _,x as a,W as u};
